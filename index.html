<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>A Complete Fiasco</title>
  <style>
*{box-sizing:border-box}body{font-family:Arial,Helvetica,sans-serif}h1,h2,h3,h4,h5,h6{margin:0 0 20px 0;font-family:Arial,Helvetica,sans-serif}h1{color:#1d4787}h2{color:#5e6062}h3{color:#939393}h4,h5{color:#212121}h6{color:#5e6062}li{margin-bottom:.25em}pre,code{text-align:left;font-family:"Lucida Console",Monaco,monospace;color:#5e6062;background:#F8F8F8}a{text-decoration:none}a,a:visited{color:#212121}a:hover{color:#939393}img{vertical-align:inherit}blockquote{border-left:8px solid;padding-left:.5em;color:#939393;text-align:left;margin:1em 0}blockquote>p{margin:0}.remark-code{font-size:.9em}.remark-container{background:#333}.remark-slide-scaler{box-shadow:none}.remark-notes{font-size:1.5em}.remark-slide-content{font-size:28px;padding:0em 1em 1em 1em;color:#212121;background-size:cover}.remark-slide-number{color:#fff;right:1em;opacity:.6;font-size:0.8em;z-index:2}.no-counter .remark-slide-number{display:none}.impact{background-color:#1d4787;vertical-align:middle;text-align:center}.impact,.impact h1,.impact h2{color:#fff}.impact h1{font-size:80px}.full,.full h1,.full h2{color:#fff}.fulliframe{height:calc(66.66667% - 1.2em);width:66.66667%;transform:scale(1.5);transform-origin:0 0;border:0}.bottom-bar{background-color:#fff;color:#212121;position:absolute;bottom:0;left:0;right:0;font-size:20px;padding:.4em;text-align:left;z-index:1}.bottom-bar p{margin:0}.impact .bottom-bar,.full .bottom-bar{display:none}.colorstrip{background-color:#1d4787;position:absolute;height:57px;bottom:0;left:0;right:0;font-size:20px;padding:.4em;text-align:left;z-index:1}.colorstrip p{margin:0}.impact .colorstrip,.full .colorstrip{display:none}.school-logo{height:35px;float:right;padding-right:10px;vertical-align:bottom}.fa{color:#1d4787}.fa:hover{color:#939393}table{border-collapse:collapse}th,td{padding:4px;border:1px solid black}.side-layer{position:absolute;left:0;width:100%;padding:0 2em}.middle,.middle img,.middle span{vertical-align:middle}.top{vertical-align:top}.bottom{vertical-align:bottom}.inline-block p,.inline-block ul,.inline-block ol,.inline-block blockquote{display:inline-block;text-align:left}.no-margin,.no-margin>p,.no-margin>pre,.no-margin>ul,.no-margin>ol{margin:0}.no-padding{padding:0}.space-left{padding-left:1em}.space-right{padding-right:1em}.responsive>img{width:100%;height:auto}.contain{background-size:contain}.overlay{box-shadow:inset 0 0 0 9999px rgba(0,0,0,0.5)}.left{text-align:left}.right{text-align:right}.center{text-align:center}.justify{text-align:justify}.primary{color:#1d4787}.alt{color:#5e6062}.em{color:#939393}.thin{font-weight:200}.huge{font-size:2em}.big{font-size:1.5em}.small{font-size:.8em}.dark-bg{background-color:#333}.alt-bg{background-color:#5e6062}.row{width:100%}.row::after{content:'';display:table;clear:both}.row.table{display:table}.row.table [class^="col-"]{float:none;display:table-cell;vertical-align:inherit}[class^="col-"]{float:left}[class^="col-"].inline-block{float:none;display:inline-block}.col-1{width:8.33333%}.col-2{width:16.66667%}.col-3{width:25%}.col-4{width:33.33333%}.col-5{width:41.66667%}.col-6{width:50%}.col-7{width:58.33333%}.col-8{width:66.66667%}.col-9{width:75%}.col-10{width:83.33333%}.col-11{width:91.66667%}.col-12{width:100%}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.animation-fade{animation-duration:300ms;animation-fill-mode:both;animation-timing-function:ease-out}.remark-visible .animation-fade{animation-name:fadeIn}@page{size:1210px 681px;margin:0}@media print{.remark-slide-scaler{width:100% !important;height:100% !important;transform:scale(1) !important;top:0 !important;left:0 !important}}

</style>
  <script src="file:///home/travis/build/wtbarnes/pyastro-2018-talk/template/remark.min.js"></script>
  <!--<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>-->
  <!-- MathJax Local install -->
  <!--<script type="text/javascript" src="file:///home/travis/build/wtbarnes/pyastro-2018-talk/template/node_modules/mathjax/MathJax.js?config=TeX-AMS_HTML&delayStartupUntil=configured"></script>-->
  <!-- Mathjax CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_HTML&delayStartupUntil=configured" type="text/javascript"></script>
  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
  <script>
    // Backslide setup
    function create() {
      return remark.create({
        source: "title: A Complete Fiasco\nclass: animation-fade\nlayout: true\n\n<!-- This slide will serve as the base layout for all your slides -->\n.colorstrip[\n]\n.bottom-bar[\n    <a href=\"https://wtbarnes.github.io/pyastro-2018-talk\">\n    wtbarnes.github.io/pyastro-2018-talk\n    </a>\n    <img src=\"file:///home/travis/build/wtbarnes/pyastro-2018-talk/img/fiasco-logo.png\" class=\"school-logo\">\n]\n\n---\n\nclass: impact\n## A Complete *fiasco* \n### The Difficulties of Dealing with Atomic Data and a (Possible) Pythonic Solution\n<img src=\"file:///home/travis/build/wtbarnes/pyastro-2018-talk/img/fiasco-logo.png\" height=\"250px\" style=\"vertical-align:bottom\">\n### PyAstro 2018 &ndash; New York, NY &ndash; 1 May 2018\n## Will Barnes\n##### Dept. of Physics & Astronomy, Rice University, Houston, TX \n\n---\nclass: middle\n\n# Contact Info\n.col-1[\n  &zwnj;\n]\n.col-4[\n<a href=\"https://github.com/wtbarnes\">\n<i class=\"fa fa-github-alt fa-3x\" aria-hidden=\"true\" style=\"vertical-align:middle; padding-right:10px;\"></i>wtbarnes</a>\n\n<a href=\"https://twitter.com/wtbarnes_\">\n<i class=\"fa fa-twitter fa-3x\" aria-hidden=\"true\" style=\"vertical-align:middle; padding-right:10px;\"></i>\nwtbarnes_</a>\n]\n.col-7[\n<a href=\"http://wtbarnes.github.io/\">\n<i class=\"fa fa-globe fa-3x\" aria-hidden=\"true\" style=\"vertical-align:middle; padding-right:10px;\"></i>wtbarnes.github.io</a>\n\n<a href=\"file:///home/travis/build/wtbarnes/pyastro-2018-talk/mailto:will.t.barnes@gmail.com\">\n<i class=\"fa fa-envelope fa-3x\" aria-hidden=\"true\" style=\"vertical-align:middle; padding-right:10px;\"></i>will.t.barnes@gmail.com</a>\n]\n\n---\nclass: middle,center\n\n# Atomic Physics? Who Cares?\n\n---\nclass: full,middle,center\nbackground-image: url(file:///home/travis/build/wtbarnes/pyastro-2018-talk/\"img/aia_ar.png\")\nbackground-size: contain\n\n---\nclass: middle\n\n# The CHIANTI Atomic Database\n* [Give some background on CHIANTI here]\n* [Some explanation of what CHIANTI is, what it is used for]\n* [no more than two slides]\n* [Number of citations, popularity]\n\n---\nclass: full,middle,center\nbackground-image: url(file:///home/travis/build/wtbarnes/pyastro-2018-talk/\"img/chianti_periodictable.png\")\nbackground-size: contain\n\n---\n# The CHIANTI Atomic Database\n\n* [all tools in IDL]\n* Data + Software\n* [Important to have python alternative]\n* [Mention ChiantiPy briefly]\n* [Start with many good things about CHIANTI, how it is useful, powerful tool]\n* [Then some downsides]\n  * ASCII data files\n  * Software is freely available, but no clear way to contribute or report bugs\n  * No tests\n  * Some documentation, but out of date\n  * IDL!\n  * A collection of useful scripts rather than a library for interacting with the data\n* Need a Python equivalent\n* e.g. AIA response functions\n* Lead into fiasco package\n\n---\n\n.col-8[\n# The *fiasco* Package\n\n[![Build Status](https://travis-ci.org/wtbarnes/fiasco.svg?branch=master)](https://travis-ci.org/wtbarnes/fiasco)\n[![Documentation Status](https://readthedocs.org/projects/fiasco/badge/?version=latest)](http://fiasco.readthedocs.io/en/latest/?badge=latest)\n[![Coverage Status](https://coveralls.io/repos/github/wtbarnes/fiasco/badge.svg?branch=master&service=github)](https://coveralls.io/github/wtbarnes/fiasco?branch=master&service=github)\n* First commit 9 August 2017, 196 commits as of 26 April \n* **Python 3 only** (3.6 or later)\n* Documentation builds on Read the Docs\n* Automated test suite run on Travis CI\n* Pre-v0.1 &ndash; no formal release yet\n* Pip and conda packages coming soon(*ish*)\n\n```bash\n$ git clone https://github.com/wtbarnes/fiasco.git\n$ cd fiasco && python setup.py install\n```\n]\n.col-4[\n  <div style=\"text-align:center;\">\n  <figure>\n  <img src=\"https://upload.wikimedia.org/wikipedia/commons/d/d4/HD.5A.036_%2810555475386%29.jpg\" width=350px;>\n  <figcaption><small>Image Credit: <a href=\"https://commons.wikimedia.org/wiki/File:HD.5A.036_(10555475386).jpg\">Wikipedia</a></small></figcaption>\n  </figure>\n]\n\n---\nclass: middle,center\n\n# Parsing the Data\n\n---\n\n## A Typical CHIANTI Data File...\n```shell\n$ head chianti/dbase/fe/fe_16/fe_16.elvlc\n```\n```\n1     3s    2  S    0.5          0.000          0.000\n2     3p    2  P    0.5     277194.188     276436.000\n3     3p    2  P    1.5     298143.094     296534.000\n4     3d    2  D    1.5     675501.188     676373.000\n5     3d    2  D    2.5     678405.875     679712.000\n6     4s    2  S    0.5    1867740.000    1867895.000\n7     4p    2  P    0.5    1977649.625    1977070.000\n8     4p    2  P    1.5    1985649.500    1984703.000\n9     4d    2  D    1.5    2124719.500    2124092.000\n10    4d    2  D    2.5    2125959.500    2125524.000\n```\n\n---\n```shell\n$ head -n 6 chianti/dbase/fe/fe_16/fe_16.scups\n```\n```\n*1      2   2.519e+00   2.488e-01   3.951e-01   15    1   2.831e+00\n*0.000e+00   4.098e-02   9.376e-02   1.645e-01   2.648e-01   4.218e-01   5.326e-01   6.221e-01   7.073e-01   7.527e-01   7.867e-01   8.200e-01   8.392e-01   8.547e-01   1.000e+00\n*1.455e+00   1.338e+00   1.187e+00   1.064e+00   9.296e-01   7.523e-01   6.503e-01   5.789e-01   5.236e-01   4.993e-01   4.817e-01   4.652e-01   4.574e-01   4.510e-01   3.951e-01\n1      3   2.702e+00   5.371e-01   7.951e-01   15    1   2.747e+00\n0.000e+00   4.061e-02   9.306e-02   1.636e-01   2.641e-01   4.222e-01   5.341e-01   6.245e-01   7.104e-01   7.559e-01   7.900e-01   8.231e-01   8.422e-01   8.575e-01   1.000e+00\n2.355e+00   2.291e+00   2.209e+00   2.068e+00   1.845e+00   1.525e+00   1.321e+00   1.171e+00   1.052e+00   9.979e-01   9.626e-01   9.295e-01   9.138e-01   9.010e-01   7.951e-01\n```\n```shell\n$ head -n 3 chianti/dbase/al/al_6/al_6.psplups\n```\n```\n1  2  2 0.000e+00 2.490e-02 6.100e+01 0.000e+00 0.000e+00 1.356e-10 6.071e-10 1.318e-09\n1  3  2 0.000e+00 3.489e-02 3.250e+01 0.000e+00 0.000e+00 1.763e-11 1.525e-10 4.892e-10\n*2  3  2 0.000e+00 9.997e-03 1.860e+02-1.000e-12-2.095e-12-3.666e-13 1.333e-12 9.092e-12 3.369e-11 8.857e-11 1.609e-10 1.700e-10\n```\n\n---\n\n# Parsing the Data\n\n.col-6[\n* 13 different possible filetypes for each ion\n* **Fixed-width FORTRAN format**\n* Only metadata is original data source\n  * No units\n  * No column labels\n* *Most* filetypes are described in CHIANTI documentation\n* **Want:**\n  * Common parser for all files\n  * Metadata\n  * Dataframe or Astropy Table\n  * Maximize code reuse!\n]\n.col-6[\n```\nchianti/dbase/he/he_3\n└── he_3.rrparams\nchianti/dbase/fe/fe_16/\n├── fe_16.diparams\n├── fe_16.drparams\n├── fe_16.easplom\n├── fe_16.easplups\n├── fe_16.elvlc\n├── fe_16.fblvl\n├── fe_16.rrparams\n├── fe_16.scups\n└── fe_16.wgfa\n```\n]\n\n---\n```python\n>>> from fiasco.io import Parser\n>>> p = Parser('fe_16.elvlc')\n>>> p.parse()\nlevel  config  label multiplicity L_label  J   E_obs       E_th   \n                                               1 / cm     1 / cm  \n----- -------- ----- ------------ ------- --- -------- -----------\n    1   3s2.3p                  2       P 0.5      0.0         0.0\n    2   3s2.3p                  2       P 1.5  18852.0     18332.0\n...\n>>> Parser('al_6.psplups').parse()\nlower_level upper_level bt_type  gf delta_energy  bt_c    bt_rate [9]   \n                                         Ry                             \n----------- ----------- ------- --- ------------ ----- -----------------\n          1           2       2 0.0       0.0249  61.0        0.0 .. nan\n          1           3       2 0.0      0.03489  32.5        0.0 .. nan\n          2           3       2 0.0     0.009997 186.0 -1e-12 .. 1.7e-10\n```\n\n---\n\n.col-7[\n```python\n>>> type(Parser('fe_16.elvlc'))\nfiasco.io.sources.ion_sources.ElvlcParser\n>>> type(Parser('al_6.psplups'))\nfiasco.io.sources.ion_sources.PsplupsParser\n```\n\n* `ParserFactory` *metaclass* creates parser classes \"on the fly\"\n* *Factory pattern* &ndash; common software design pattern\n* Filetype determines parser class\n* In most simple case, a parser class just provides\n  * headings\n  * units\n  * types\n  * descriptions\n]\n.col-5[\n  <img src=\"file:///home/travis/build/wtbarnes/pyastro-2018-talk/img/parser_inheritance_diagram.svg\" width=425px>\n]\n\n---\nclass: center, middle\n\n# Building an HDF5 Database\n\n---\nclass: middle,center\n\n# The fiasco API: Using the Data\n\n---\nclass: middle\n## Three (really two) Primary Objects\n* `Ion`\n* `Element`\n* `IonCollection`\n\n---\n## The `Ion` Object\n```python\n>>> import fiasco\n>>> import numpy as np; import astropy.units as u\n>>> t = np.logspace(4,8,100)*u.K\n>>> ion = fiasco.Ion('Fe 16', temperature=t)\n# Equivalently\n>>> fiasco.Ion('Fe +15', t), fiasco.Ion('iron 16', t);\n# Basic metadata\n>>> ion.element_name, ion.atomic_symbol, ion.atomic_number\n('iron', 'Fe', 26) \n>>> ion.ion_name, ion.ionization_stage, ion.charge_state\n('Fe 16', 16, 15)\n```\n\n---\n.col-7[\n```python\n>>> ion\nCHIANTI Database Ion\n---------------------\nName: Fe 16\nElement: iron (26)\nCharge: +15\nNumber of Levels: 161\nNumber of Transitions: 2815\n\nTemperature range: [0.01 MK, 100.0 MK]\n\nHDF5 Database: .fiasco/chianti_dbase.h5\nUsing Datasets:\n  ioneq: chianti\n  abundance: sun_photospheric_1998_grevesse\n  ip: chianti\n```\n]\n.col-5[\n* String representation of an object set by `__repr__` method \n* Give meaningful information about your object!\n```python\n>>> class Foo():\n            pass\n>>> Foo()\n<__main__.Foo at 0x11a30b7f0>\n>>> class Foo():\n            def __repr__(self):\n                return 'foo!'\n>>> Foo()\n'foo!'\n```\n]\n---\n## Accessing Atomic Data\n---\nclass: middle\n\n# Infrastructure Challenges\n* Distibuting and versioning data\n* Interaction with other databases\n* Serving data remotely with h5serv\n\n---\nclass: middle\n\n# Summary\n\n---\nclass:middle\n\n# Resources\n.col-6[\n<a href=\"https://github.com/wtbarnes/fiasco\">\n<i class=\"fa fa-github-alt fa-3x\" aria-hidden=\"true\" style=\"vertical-align:middle; padding-right:10px;\"></i>wtbarnes/fiasco</a>\n\n<a href=\"http://fiasco.readthedocs.io/en/latest/\">\n<i class=\"fa fa-book fa-3x\" aria-hidden=\"true\" style=\"vertical-align:middle; padding-right:10px;\"></i>fiasco.readthedocs.io</a>\n]\n.col-6[\n<a href=\"https://github.com/wtbarnes/pyastro-2018-talk\">\n<i class=\"fa fa-code fa-3x\" aria-hidden=\"true\" style=\"vertical-align:middle; padding-right:10px;\"></i>wtbarnes/pyastro-2018-talk</a>\n\n<a href=\"http://www.chiantidatabase.org/\">\n<i class=\"fa fa-globe fa-3x\" aria-hidden=\"true\" style=\"vertical-align:middle; padding-right:10px;\"></i>CHIANTI Webpage</a>\n]\n\n---\nclass: middle\n\n# Acknowledgment\n\n* CHIANTI Team\n* Ken Dere (ChiantiPy)\n* <img src=\"https://github.com/sunpy/sunpy-logo/blob/master/generated/sunpy_icon.png?raw=true\" width=\"60px\"> SunPy project\n  * Stuart Mumford (NSO)\n  * David Pérez-Suárez (UCL)\n* <img src=\"https://github.com/PlasmaPy/PlasmaPy-logo/blob/master/exports/graphic.png?raw=true\" width=\"40px\"> PlasmaPy project\n  * Nick Murphy (CfA)\n  * Drew Leonard (Sheffield)\n* Stephen Bradshaw (Rice)\n* Slides built with [**backslide**](https://github.com/sinedied/backslide) and [**Remark.js**](https://github.com/gnab/remark)\n",
        ratio: '16:9',
        highlightLines: true,
        countIncrementalSlides: false,
        slideNumberFormat: "",
        highlightStyle: 'vs'
      });
    }
    // Mathjax setup
    MathJax.Hub.Config({
          tex2jax: {
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
          }
      });
      MathJax.Hub.Configured();
  </script>
</head>
<body onload="slideshow = create()">
</body>
</html>